
<html>
    <head><title>Torstinator</title>
        <script type="text/javascript" src="/socket.io/socket.io.js"></script>

        <script type='text/javascript' src='https://www.google.com/jsapi'></script>
            <script type='text/javascript'>
            var soundlevel = 0;
            socket = new io.connect('voihan.huoh.fi:8080');
            socket.on('soundlevel', function(sound){
                soundlevel = sound.level;
                drawChart(soundlevel);
            
            });
            
            google.load('visualization', '1', {packages:['gauge']});
            google.setOnLoadCallback(drawChart);
            function drawChart() {
                var data = google.visualization.arrayToDataTable([
                    ['Label', 'Value'],
                    ['Noise', soundlevel]
                ]);
            
            var options = {
                width: 400, height: 400,
                redFrom: 80, redTo: 100,
                yellowFrom:50, yellowTo: 80,
                minorTicks: 5
            };
            
            var chart = new google.visualization.Gauge(document.getElementById('chart_div'));
            chart.draw(data, options);
            }
            </script>
            </head>
            <body>
            <div id='chart_div'></div>
            </body>
            </html>